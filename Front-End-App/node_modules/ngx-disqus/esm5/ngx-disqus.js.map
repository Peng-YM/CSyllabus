{
  "version": 3,
  "file": "ngx-disqus.js",
  "sources": [
    "ng://ngx-disqus/src/disqus.module.ts",
    "ng://ngx-disqus/src/disqus.component.ts",
    "ng://ngx-disqus/src/disqus.service.ts",
    "ng://ngx-disqus/src/disqus.token.ts"
  ],
  "sourcesContent": [
    "import { NgModule, ModuleWithProviders, InjectionToken } from '@angular/core';\r\nimport { DisqusComponent } from './disqus.component';\r\nimport { DisqusService } from './disqus.service';\r\nimport { SHORTNAME } from './disqus.token';\r\n\r\n/** Initialize Disqus with shortname */\r\nexport function DisqusFactory(shortname: string) {\r\n  return new DisqusService(shortname);\r\n}\r\n\r\n@NgModule({\r\n  declarations: [DisqusComponent],\r\n  exports: [DisqusComponent]\r\n})\r\nexport class DisqusModule {\r\n  static forRoot(shortname: string): ModuleWithProviders {\r\n    return {\r\n      ngModule: DisqusModule,\r\n      providers: [\r\n        { provide: SHORTNAME, useValue: shortname },\r\n        {\r\n          provide: DisqusService,\r\n          useFactory: DisqusFactory,\r\n          deps: [SHORTNAME]\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n",
    "import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  OnChanges,\r\n  OnDestroy,\r\n  ChangeDetectionStrategy,\r\n  Renderer2,\r\n  ElementRef,\r\n  EventEmitter\r\n} from '@angular/core';\r\nimport { DisqusService } from './disqus.service';\r\nimport { DisqusComment, DisqusReady } from './disqus.model';\r\n\r\n@Component({\r\n  selector: 'disqus',\r\n  template: '<div id=\"disqus_thread\"></div>',\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\n\r\nexport class DisqusComponent implements OnChanges, OnDestroy {\r\n\r\n  /** DISQUS options */\r\n  @Input() url: string;\r\n  @Input() identifier: string;\r\n  @Input() title: string;\r\n  @Input() category: string;\r\n  @Input() language: string;\r\n\r\n  /** DISQUS events */\r\n  @Output() newComment = new EventEmitter<DisqusComment>(true);\r\n  @Output() ready = new EventEmitter<DisqusReady>(true);\r\n  @Output() paginate = new EventEmitter<any>(true);\r\n\r\n  constructor(private renderer: Renderer2, private el: ElementRef, private dService: DisqusService) { }\r\n\r\n  ngOnChanges() {\r\n    /** Reset Disqus if any input changed */\r\n\r\n    if (!this.dService.window.DISQUS) {\r\n      this.addDisqusScript();\r\n    } else {\r\n      this.reset();\r\n    }\r\n  }\r\n\r\n  /** Add DISQUS script */\r\n  addDisqusScript() {\r\n\r\n    /** Set DISQUS config */\r\n    this.dService.window.disqus_config = this.getConfig();\r\n\r\n    const disqusScript = this.renderer.createElement('script');\r\n    disqusScript.src = `//${this.dService.shortname}.disqus.com/embed.js`;\r\n    disqusScript.async = true;\r\n    disqusScript.type = 'text/javascript';\r\n    this.renderer.setAttribute(disqusScript, 'data-timestamp', new Date().getTime().toString());\r\n    this.renderer.appendChild(this.el.nativeElement, disqusScript);\r\n  }\r\n\r\n  /** Reset DISQUS with the new config */\r\n  reset() {\r\n    this.dService.window.DISQUS.reset({\r\n      reload: true,\r\n      config: this.getConfig()\r\n    });\r\n  }\r\n\r\n  /** Create DISQUS config from inputs */\r\n  getConfig() {\r\n    const self = this;\r\n    return function () {\r\n      this.page.identifier = self.identifier;\r\n      this.page.url = self.validateUrl(self.url);\r\n      this.page.title = self.title;\r\n      this.category_id = self.category;\r\n      this.language = self.language;\r\n\r\n      /* Available callbacks are afterRender, onInit, onNewComment, onPaginate, onReady, preData, preInit, preReset */\r\n      this.callbacks.onNewComment = [(e) => {\r\n        self.newComment.emit(e);\r\n      }];\r\n\r\n      this.callbacks.onReady = [(e) => {\r\n        self.ready.emit(e);\r\n      }];\r\n\r\n      this.callbacks.onPaginate = [(e) => {\r\n        self.paginate.emit(e);\r\n      }];\r\n    };\r\n  }\r\n\r\n  validateUrl(url: string) {\r\n    /** Validate URL input */\r\n    if (url) {\r\n      const r = /(http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\r\n\r\n      if (r.test(url)) {\r\n        return url;\r\n      } else {\r\n        console.warn('[Disqus]: Invalid URL, return undefined');\r\n      }\r\n    }\r\n    /** DISQUS will fallback to \"Window.location.href\" when URL is undefined */\r\n    return undefined;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dService.window.DISQUS = undefined;\r\n    this.dService.window.disqus_config = undefined;\r\n  }\r\n}\r\n",
    "import { Injectable, Inject } from '@angular/core';\r\nimport { SHORTNAME } from './disqus.token';\r\n\r\ndeclare const global: any;\r\n\r\n@Injectable()\r\nexport class DisqusService {\r\n\r\n  constructor( @Inject(SHORTNAME) public shortname: string) {\r\n  }\r\n\r\n  get window() {\r\n    return _window();\r\n  }\r\n}\r\n\r\nfunction _window() {\r\n  return typeof window !== 'undefined' ? window : global;\r\n}\r\n\r\n",
    "import { InjectionToken } from '@angular/core';\r\n\r\nexport const SHORTNAME = new InjectionToken<string>('SHORTNAME');\r\n"
  ],
  "names": [],
  "mappings": "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"
}
